import { Injectable } from '@angular/core';
import { Tag, Book } from '../interfaces';
import { Observable, filter, from, map, of, tap, toArray } from 'rxjs';

@Injectable({
  providedIn: 'root'
})
export class DataStorageService {

  public tags: Tag[] = [
    { id: 1,  active: false, name: 'Comedy', timesUsed: 0 },
    { id: 2,  active: false, name: 'Horror', timesUsed: 0 },
    { id: 3,  active: false, name: 'Drama', timesUsed: 0 },
    { id: 4,  active: false, name: 'Documentary', timesUsed: 0 },
    { id: 5,  active: false, name: 'Adventure', timesUsed: 0 },
    { id: 6,  active: false, name: 'Western', timesUsed: 0 },
    { id: 7,  active: false, name: 'Animation', timesUsed: 0 },
    { id: 8,  active: false, name: 'Narrative', timesUsed: 0 },
    { id: 9,  active: false, name: 'Fiction', timesUsed: 0 },
    { id: 10, active: false,  name: 'Musical genre', timesUsed: 0 },
    { id: 11, active: false,  name: 'Epic', timesUsed: 0 },
    { id: 12, active: false,  name: 'Disaster', timesUsed: 0 },
    { id: 13, active: false,  name: 'Martial Arts', timesUsed: 0 },
    { id: 14, active: false,  name: 'Buddy', timesUsed: 0 },
    { id: 15, active: false,  name: 'Action', timesUsed: 0 },
    { id: 16, active: false,  name: 'Thriller', timesUsed: 0 },
    { id: 17, active: false,  name: 'Romance', timesUsed: 0 },
    { id: 18, active: false,  name: 'Noir', timesUsed: 0 },
    { id: 19, active: false,  name: 'Fantasy', timesUsed: 0 },
    { id: 20, active: false,  name: 'Magical Realism', timesUsed: 0 },
    { id: 21, active: false,  name: 'Musical', timesUsed: 0 },
    { id: 22, active: false,  name: 'Abstract animation film', timesUsed: 0 },
    { id: 23, active: false,  name: 'Historical film', timesUsed: 0 },
    { id: 24, active: false,  name: 'Mystery', timesUsed: 0 },
    { id: 25, active: false,  name: 'Historical Fiction', timesUsed: 0 },
    { id: 26, active: false,  name: 'Children\'s film', timesUsed: 0 },
    { id: 27, active: false,  name: 'Dance film', timesUsed: 0 },
    { id: 28, active: false,  name: 'Biographical', timesUsed: 0 },
    { id: 29, active: false,  name: 'Teen', timesUsed: 0 },
    { id: 30, active: false,  name: 'Experimental', timesUsed: 0 },
    { id: 31, active: false,  name: 'Science fiction', timesUsed: 0 },
    { id: 32, active: false,  name: 'Crime film', timesUsed: 0 }
  ];
    
  public readonly moviesCollections = [
    { id: 1, tags: [2, 3, 6, 29, 25, 22], src: 'https://deadline.com/wp-content/uploads/2022/08/lord-of-the-rings-feature-image.jpg?w=1000', name: "The Lord of the Rings", favorite: true, date: '2023-03-14 11:54:25.843 +0000', isRequireLogin: true, link:''},
    { id: 2, tags: [6,4], src: 'https://m.media-amazon.com/images/I/61wOt39gY6L._AC_UF1000,1000_QL80_FMwebp_.jpg', name: "The Hunger Games", favorite: false, date: '2021-05-02 03:51:31.843 +0000', isRequireLogin: false, link:''},
    { id: 3, tags: [6,5], src: 'https://cdn.vox-cdn.com/thumbor/wknjWA1eDuRCKcOhtiFWMWXTcww=/0x0:1686x816/1200x800/filters:focal(668x248:936x516)/cdn.vox-cdn.com/uploads/chorus_image/image/61633721/narnia.0.jpg', name: "The Chronicles of Narnia", favorite: true, date: '2019-11-02 11:52:31.843 +0000', isRequireLogin: false, link:''},
    { id: 4, tags: [11, 23], src: 'https://m.media-amazon.com/images/I/91r0dvXhNGL._AC_UF1000,1000_QL80_FMwebp_.jpg', name: "Harry Potter", favorite: false, date: '2023-03-14 11:54:25.843 +0000', isRequireLogin: true, link:''},
    { id: 5, tags: [30, 6], src: 'https://m.media-amazon.com/images/I/91lFJOYspuL._AC_UF1000,1000_QL80_FMwebp_.jpg', name: "The Hitchhiker's Guide to the Galaxy", favorite: false, date: '2021-05-02 03:51:31.843 +0000', isRequireLogin: true, link:''},
    { id: 6, tags: [15, 13], src: 'https://m.media-amazon.com/images/I/91hPXkwnaeL._AC_UF1000,1000_QL80_FMwebp_.jpg', name: "Game of Thrones", favorite: false, date: '2019-11-02 11:52:31.843 +0000', isRequireLogin: false, link:''},
    { id: 7, tags: [18, 11], src: 'https://m.media-amazon.com/images/I/91AXiPhTuoL._AC_UF1000,1000_QL80_FMwebp_.jpg', name: "Percy Jackson and the Olympians", favorite: true, date: '2023-03-14 11:54:25.843 +0000', isRequireLogin: false, link:''},
    { id: 8, tags: [2, 3], src: 'https://m.media-amazon.com/images/I/715ViOMJmIL._AC_SX444_SY639_FMwebp_QL65_.jpg', name: "The Dark Tower", favorite: false, date: '2021-05-02 03:51:31.843 +0000', isRequireLogin: false, link:''},
    { id: 9, tags: [2, 3], src: 'https://m.media-amazon.com/images/I/51jQChB+fmL._AC_UF1000,1000_QL80_FMwebp_.jpg', name: "The Wheel of Time", favorite: true, date: '2019-11-02 11:52:31.843 +0000', isRequireLogin: true, link:''},
    { id: 10, tags: [1, 3], src: 'https://m.media-amazon.com/images/I/81ym3QUd3KL._AC_UF1000,1000_QL80_FMwebp_.jpg', name: "Dune", favorite: true, date: '2023-03-14 11:54:25.843 +0000', isRequireLogin: false, link:''},
    { id: 11, tags: [4, 5], src: 'https://m.media-amazon.com/images/I/91VelHkK8yL._AC_UF1000,1000_QL80_FMwebp_.jpg', name: "The Mortal Instruments", favorite: false, date: '2021-05-02 03:51:31.843 +0000', isRequireLogin: false, link:''},
    { id: 12, tags: [5, 6], src: 'https://m.media-amazon.com/images/I/71IkcEies6L._AC_UF1000,1000_QL80_FMwebp_.jpg', name: "The Maze Runner", favorite: false, date: '2019-11-02 11:52:31.843 +0000', isRequireLogin: true, link:''}
  ];

  public readonly bookCollections = [
    { tags: [6, 11, 15, 32], name: "The Godfather", favorite: false, src: "https://cdn.britannica.com/55/188355-050-D5E49258/Salvatore-Corsitto-The-Godfather-Marlon-Brando-Francis.jpg", id: 1, date: '2023-03-14 11:54:25.843 +0000', isRequireLogin: false, link: "https://www.amazon.pl/godfather-Mario-Puzo/dp/0099528126/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=1IYF5UQE26S5J&dib=eyJ2IjoiMSJ9.ECF5xrFICYoMrpJzukFKCsPgCfmCiG36bP0YY01N9uxTZVetEZ2mqgtFIyYgREiQXRSa08jCqveONFZaodIVXm9NSoKH_Ynaj27MtPXwVD9wPLG-YqId5YBB3sld8b4zXT1acLM1FEmYPzxKywQ3KqseHIrfvJPNMSfohw-1YI8poQISiQa9XBpsitRQe6nub93bcq0w3xkzWzVr8OfPnezusY7Uo6z-gHhbHd-26dJYYW1gIO5gQMA7hwCmk8u2OuKyASWw7RWPHhSe98G0X852B_418MtVSl0kfBibTwE.nQDGQHF1VgMHtynZquoIOxHfkXf4tcvsqguHgPkiIz4&dib_tag=se&keywords=godfather+book&qid=1711954704&sprefix=god+father+book%2Caps%2C106&sr=8-1"},
    { tags: [16, 32, 2], name: "The Silence of the Lambs", favorite: false, src: "https://m.media-amazon.com/images/I/519n1y9Q9kL._SY344_BO1,204,203,200_QL70_ML2_.jpg", id: 2, date: '2021-05-02 03:51:31.843 +0000', isRequireLogin: true, link:'https://www.amazon.pl/silence-lambs-Thomas-Harris/dp/0099532921/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=2APFZGJ1BPQA3&dib=eyJ2IjoiMSJ9.8Klk_1MneSgsK3jE8ciylMsGDZsW1ydYL3EBozNbWdIwtz8lEAWOQo89YISjTZxK84X0OgB9YuTJkl1AkLFNFr2tqzGiJA-jNSXwLccAehAjec8Lo-ndq8TCtv-DkDMPB2HSgJ-9Nev7Gz05SAcMDftbSlvfL1olObCczAijezd0XT_mzL-xZkCKmKcRjVbxGjwrvHzZRgyGWJFw54xK_QpZ69W7ZWJ57MQCqRwI3kINoixYizll4WwZL-WFyS4_En6Z96c_CkASsCLFOAPlWJ6P9IjrSZAIkx2a1sKmYso.hxEIX4f6BwazMsACEyfcZLFk8s7sdhqpUcJRHSWXr7w&dib_tag=se&keywords=The+Silence+of+the+Lambs+book&qid=1711954919&sprefix=the+silence+of+the+lambs+book%2Caps%2C187&sr=8-1'},
    { tags: [5, 9, 15], name: "The Shawshank Redemption", favorite: true, src: "https://m.media-amazon.com/images/I/51HX9XQ9HBL._SY344_BO1,204,203,200_QL70_ML2_.jpg", id: 3, date: '2019-11-02 11:52:31.843 +0000', isRequireLogin: true, link:'https://www.amazon.pl/Rita-Hayworth-Shawshank-Redemption-Stephen/dp/1529363497/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=3DG3NGD4ELUXK&dib=eyJ2IjoiMSJ9.VRQyq-YYNwZFfuyDkIOQuwKy9io69DZ-3rHViAXHxN2RycS_3aPe6MMqrzY24B3WeFeig9UDCYK21a4mNU5waAvLu0icVsQ2RtmFtEAvKfoUJRY47oF51_1rVXU3FQYx2VKGCoDElx1nOpvK8jEV04CJs7G5m-zargqO4bACaNjs-gpDuHn8mEANrYaDi9Otnb4HI8dmsXm8NVDMkF3PPPu8fL2NC9JSgeJ5kad5Ln5Ss66YT48bHj_oVpoPK0yLSQedSGnTMj1AkeQF2P-eqnKCVfB6k7-WOJ8UgL8jCRI.Hgg1IMsmi-I0mx-6avrBGkuOUze4RaGb520pmJ37xIk&dib_tag=se&keywords=The+Shawshank+Redemption+book&qid=1711955145&sprefix=the+shawshank+redemption+book%2Caps%2C108&sr=8-1'},
    { tags: [5, 24, 32], name: "The Da Vinci Code", favorite: false, src: "https://flixable.b-cdn.net/hbo-max/large/us/the-da-vinci-code.jpg", id: 4, date: '2023-03-14 11:54:25.843 +0000', isRequireLogin: false, link:'https://www.amazon.pl/Vinci-code-Robert-Langdon-Book/dp/0552159719/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=2JW4JREQ4Y60K&dib=eyJ2IjoiMSJ9.HUVrp_v3tVgcdLYV5Kh4HYtJx2CBpxv8VP3Bj1lBNw0oU3CWHfFHD-ggklY3HAV-EpGWT5unS6f14AYBiDDQBYb5hdTzfCQDhAm-LLDDD0uUYhzQAAPqgCju1MI0KDfLCEPREpAuUa89Z4oeLBVhlP34vb8xjAJ3LpM5j9MkB_KfX9eZBMxv4jKkHZZmOkgvXfL7lwqEj_xrXbbqr_2N--FY4Ty390PXdtx2z5B95FRb-XCwZMefeLt3IUjB6pmOp85koKFrntJtdsBcPEhxYRgjJ3xBDaUlMOYTIiDrrPc.m7BYUIQqp3ExldrHKHn875o6wyKLCKGNANuGnOSibIg&dib_tag=se&keywords=The+Da+Vinci+Code+book&qid=1711955174&sprefix=the+da+vinci+code+book%2Caps%2C108&sr=8-1'},
    { tags: [32, 16, 15], name: "The Girl with the Dragon Tattoo", favorite: false, src: "https://m.media-amazon.com/images/I/41quWoJq+8L._SY344_BO1,204,203,200_.jpg", id: 5, date: '2021-05-02 03:51:31.843 +0000', isRequireLogin: false, link:'https://www.amazon.pl/Girl-Dragon-Tattoo-genre-defining-introduced/dp/0857054031/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=15N3M6OFSIALN&dib=eyJ2IjoiMSJ9.h04eNPO-2osxZPUYXvJcKCJJ_SpHsfNmYYSawDhjLU9i9k-m6d2_5hIwnY7CTUyfVaqukTL3MyHZxKtn_DlYEnI6eLCSp979A0qxXP3kkOXOP5JGlSyoKDdp-9vCvbvBR_w-ndNSjUM-3WzzsTGVpo7k-OkE3hRpKqTjfX435YP59mMjxFX8LoF_IpmBVQP1mbAOcJLRr9hwc8_k3Gf78xCnbFNSLeLDlYrOGGYciJfseKYFP_EGgW_mcKoH3UY3T2rEm31JKc2RHn3KLhe2qqnVbuDmBvjvhHg38ITVQco.P4u5NJEOeAetth02dDDgFxeq73WeELWLvphjPHdbLWM&dib_tag=se&keywords=The+Girl+with+the+Dragon+Tattoo+book&qid=1711955199&sprefix=the+girl+with+the+dragon+tattoo+book%2Caps%2C188&sr=8-1'},
    { tags: [3], name: "To Kill a Mockingbird", favorite: true, src: "https://m.media-amazon.com/images/I/51cTCiLMNAL._SX339_BO1,204,203,200_.jpg", id: 6, date: '2019-11-02 11:52:31.843 +0000', isRequireLogin: false, link:'https://www.amazon.pl/Kill-Mockingbird-Harper-Lee/dp/B01M1OAGS7/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=2V7L15R44QHUB&dib=eyJ2IjoiMSJ9.qJ0K3DHnYmmz8Kst62QijCZfTnzUQy0UgDq-L0EV2zei4FTUFcND3QoHso0-e5xpfhEGe2yb1nNtsnfiOuQL0rEPbHUiMwrURMyelhvIsgVQFwlJhRTPDDxNX1Pu5JtGot_TIXAvffE1UMGpkcdhNGs2kFUNKAHxkWNuJgMJAF_AwngVDyrUi2fKL_VEfaQVEPDQGBZNOHLWCqTO-gUS0KPGs5nNE3QO3WDQFRmI7UHMKYrKAJMIaz69shj0_wurMOa2usK8ipSa6CfiKWVn5qphA0SOJq_0fV5afBl3EYg.OpN9PN-n19U9uqAjDLeC4Xsshxqs3Ovf11OMXeU3Ftk&dib_tag=se&keywords=To+Kill+a+Mockingbird+book&qid=1711955225&sprefix=to+kill+a+mockingbird+book%2Caps%2C173&sr=8-1'},
    { tags: [3, 17], name: "One Hundred Years of Solitude", favorite: false, src: "https://m.media-amazon.com/images/I/51IfaP5qfoL._SY344_BO1,204,203,200_QL70_ML2_.jpg", id: 7, date: '2023-03-14 11:54:25.843 +0000', isRequireLogin: true, link:'https://www.amazon.pl/One-Hundred-Years-Solitude-Gabriel/dp/0241971829/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=Y6KNBNCX5E7X&dib=eyJ2IjoiMSJ9.CAEDd-JPQ_PrOVLKhMxBt34IB1C2wNg9yjwid3_SfTasA3xfi3Vd6fRBaWyUsJk_9W7zqnlnimnyRVcsND-wlVE_UR-67mAkeWrnQ8MsI_4MBuNZm9pzukxYTHlVwwjm7oFHMFBAoLWxFwcO5pZLUAjE9D_X3S4Z59s-KM_E7eCwr0sC_6lcfKbPPFh3_yQvZxIb9rsQLqXFUO92X0IbYfxZy1PZmF5cAw3tA-ZwWwfu7SFb4MkNRX7wLBQ4qA4IJWtJ8OvGEJce7LA7JnMuH0WOQ7VzdD3R8zVBsjePM4E.WaEDXv9VEKbr2U4JyFgp77SuLnTPcHT6EgdMYyqmROE&dib_tag=se&keywords=One+Hundred+Years+of+Solitude+book&qid=1711955249&sprefix=one+hundred+years+of+solitude+book%2Caps%2C142&sr=8-1'},
    { tags: [3, 17], name: "The Great Gatsby", favorite: false, src: "https://m.media-amazon.com/images/I/41CPOyQP6xL._SX331_BO1,204,203,200_.jpg", id: 8, date: '2021-05-02 03:51:31.843 +0000', isRequireLogin: true, link:'https://www.amazon.pl/Great-Gatsby-Francis-Scott-Fitzgerald/dp/9083127036/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=3FS4BYYRC30LA&dib=eyJ2IjoiMSJ9.V7hZhvo70ynjtdx-rMhCRqVKsVZSEz38FO4Sdi4md6hXFnTs9O-4clh2E20jZzHI8UGa6m3MWo0IjzwrDDgc-Cm8iYmfjFuyV2cwjJ6m4QE6Nf9d9m_E_VAjopQpVX37Ep21j7S6oGsdR8WeQ9myzBid4ikGY0ZSDMH_1JeyR7D9PNU0xHNafMFbhogAu8kNaml6F-t9RM4ndTT5ADF1fL__o6doBZOusnWHCmHFnjewMs8enoRWPLVjAVHDxGPfdANtwmoOXCtO18eIk4SSgG4Q7PzLdt5J1sbNfH3Li1Q.eruBUtVaXba21vH24UlKi91l8xxZ3JPu8knJTBd8_Mk&dib_tag=se&keywords=The+Great+Gatsby+book&qid=1711955275&sprefix=the+great+gatsby+book%2Caps%2C135&sr=8-1'},
    { tags: [31, 26, 19, 15, 12, 1, 5], name: "Jurassic Park", favorite: true, src: "https://m.media-amazon.com/images/I/513qk1TGinL._SX323_BO1,204,203,200_.jpg", id: 9, date: '2019-11-02 11:52:31.843 +0000', isRequireLogin: false, link:'https://www.amazon.pl/Jurassic-Park-multimillion-bestselling-thriller/dp/1784752223/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=10SJXT7D3QT6Y&dib=eyJ2IjoiMSJ9.9Nh_4AwcsfHBTVgd2aL0lGJmLYDSrsbKqV0EzQuioj2CTY5xo2eJnzqISwM73D1nYfsOgY8j7I_-3X0rcakYKrXTNLL9AzIvTnvDAYrUkaXLv5ZfQbWpTN4ON-6ksf_OuLPL232VsOjgcUyiNEMXPN2GQQq4rfcskGSzOkIp4DymxkN9RyuqENC4i6Grx9Bo5eqj0pixa37X6ZQuzaomH4XBxbygSTz-qyUShWM2xSNAHhLaTh_URTlzGeefcNdkp2D_mOPW4wMcBxX8yKtGppHRX4VFTUkjRq64_E-36Ls.EMZ6xqpGICkudwrEEY6K-zw6J6dvrJAXu0Xr7mFAp_w&dib_tag=se&keywords=Jurassic+Park+book&qid=1711955298&sprefix=jurassic+park+book%2Caps%2C156&sr=8-1'},
    { tags: [2, 16], name: "The Shining", favorite: true, src: "https://m.media-amazon.com/images/I/51jSPyJ8v2L._SY344_BO1,204,203,200_QL70_ML2_.jpg", id: 10, date: '2023-03-14 11:54:25.843 +0000', isRequireLogin: false, link:'https://www.amazon.pl/shining-Stephen-King/dp/1444720724/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=1Z4LMSPER5H&dib=eyJ2IjoiMSJ9.Z7VdcWb7tBaWQ1e8Lwn9KUZQwvCLRPiA93XcpJDGyNDj2PldwKdhxrRekelQUu8-En5pONWxGLkY9CZciR0F5uW9ZQyBWhg_9OwAW3W_UhopOO7e_4ZAD1V127pod4_KKnWFywMlhcOJyaOyk8EhqLPHCWxXxdi0rm6vrlwWxLLvOYfc6cuU-jiTdGC0VtscLYKLQv165nnGzF-PIKYmxv0riQzzG1Fcl2prKQBBjBj6YmPdrgA-mnvh8inHS-IJu_FTPL1LjI_wpqIB4cdlfqGTqgi4-yHXs58Rd2xtFSs.9NHg8TK5AJW5_60lEC339MjdKG5ttpPOYG-dGpQneVc&dib_tag=se&keywords=The+Shining+book&qid=1711955320&sprefix=the+shining+book%2Caps%2C191&sr=8-1'},
    { tags: [3, 5, 12, 31], name: "The Martian", favorite: false, src: "https://m.media-amazon.com/images/I/51Bw27SCLDL._SY498_BO1,204,203,200_.jpg", id: 11, date: '2021-05-02 03:51:31.843 +0000', isRequireLogin: false, link:'https://www.amazon.pl/Martian-international-bestseller-Oscar-winning-blockbuster/dp/1785031139/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=E0QUN5HBA082&dib=eyJ2IjoiMSJ9.0CMbMeW-4C-ATB4oJflHgEM1kCsjlYhz-b-cGyJ7i_M8ZP_AR2MqEUtWqqvv3u8-yacUJ1Jt1yOJD9mdebPwNNCYiown8HlIqJCozzqWjb2isg3SJDzOSbIIUlg9uD6YJtFCKYh5GZ9SzLzJmhTVU5ykpRFTQm2iaVWP-olry3vB_gkQYgJgLm85TR0R4nBj0aWUCCjjESc210v8BavtrVrf6FnUSaj8ZLXkfNfK1ClDJgBQrK_AP3p20tZN3sCG1uW2myry8gTtd4V2GVpsj08T65DeHHEwtdOUmWFM6JY.-3y_BI3sVdP4ttX9NT1QkwzaeaVhcxM12SSp9UYucyk&dib_tag=se&keywords=The+Martian+book&qid=1711955348&sprefix=the+martian+book%2Caps%2C158&sr=8-1'},
    { tags: [26, 20, 15, 19, 11], name: "The Hobbit", favorite: false, src: "https://m.media-amazon.com/images/I/41DfP7NpIIL._SX327_BO1,204,203,200_.jpg", id: 12, date: '2019-11-02 11:52:31.843 +0000', isRequireLogin: true, link:'https://www.amazon.pl/hobbit-There-back-again/dp/0007458428/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=ZTU5MS9ZKKRF&dib=eyJ2IjoiMSJ9.OZUuxbFouab6VvYVV2VWNuTPL3oN4kTKA6HXzmGxLHgKlCPekLuuptqog_mitdA3pEvjCVaB_eXfYk5QfmmDZKV8J0-FhHziyTRpvCn7M7V5wyzeN6eu6uv_FLewREzLOzR3p-PDaDNA3DedqieeV0TX6RSIPy6ySzjD6IF5wGHNRUQ_aeQ51txmQXiMylGH9Mom7qlrfaVwMFZiWGVDlzTNRrrdz5eSp-ULPvXBOyLowdRQglcQX6L3zFkiL0w1ZzLi_l_mc38S12orpZWOVV3CP07nDgY4bSuppUviJtM.HnHfa2sKlzXX_FPaTu1gZO0aDpvrMPCeTtrMh8QpgBM&dib_tag=se&keywords=The+Hobbit+book&qid=1711955370&sprefix=the+hobbit+book%2Caps%2C127&sr=8-1'},
    { id: 1, tags: [26, 20, 15, 19, 11], name: "The Lord of the Rings", src: 'https://deadline.com/wp-content/uploads/2022/08/lord-of-the-rings-feature-image.jpg?w=1000', favorite: true, date: '2023-03-14 11:54:25.843 +0000', isRequireLogin: true, link:'https://www.amazon.pl/Lord-Rings-Special-Illustrated-Tolkien/dp/0008471282/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=J6VA6VB7C4MX&dib=eyJ2IjoiMSJ9.i73an5qEr-Tbu97NqWFvwHxFVq5SA_4mGXKy5Ekjw8m-n__b2M_iG9kLd7XYzfhNXdMD18PRXFOxqoUoExVC_iGrVsV0JTRWITFrt3srp0jY4XA1YGlAMJYEIsc1UEmFAGty1gclzLihniRfELz5pBVjorlzxdRAeGZcRXWknMd9s54jDf1Lk8DfbFxS0mgtEvI4NNFsTXWbYaYsOf7xfK5liPjVHtLbrMPvKmMjZMLVWGU7WVGb35F5CoQUhDt4TBuRu5tifDO8wXApaxcygmhlwTKrmFd4L96WWUMdugo.-0MrQ5TXuCBMuKFZ3TpwSTkm2L1oynAL2lk7yZgiYHE&dib_tag=se&keywords=The+Lord+of+the+Rings+book&qid=1711955396&sprefix=the+lord+of+the+rings+book%2Caps%2C171&sr=8-1'},
    { id: 2, tags: [3, 5], name: "The Hunger Games", src: 'https://m.media-amazon.com/images/I/61wOt39gY6L._AC_UF1000,1000_QL80_FMwebp_.jpg', favorite: false, date: '2021-05-02 03:51:31.843 +0000', isRequireLogin: false, link:'https://www.amazon.pl/Hunger-Games-1-Suzanne-Collins/dp/1407132083/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=2GWIMC7HMH6OV&dib=eyJ2IjoiMSJ9.MJeistJvDT9dE6A97wDwwqqtCrMl5-YO6G8HgyDQE7Cy4gxlJBm2NzIBjlk1o9fSEKKUjEjyD4KvEEq2TnOuShOEaxMF6T_pTvskEQbMPZHnoKtA5i4XefFpHZYdhVMKl2LMvBduyt529Q7-_Uk00xl3B1ZVsWSZEdorwvgCuJL_FCeNA194VJghiXSp8IDC0R9boFa0gRCkozjWjF5t_kLMSxFPP-qtRQvhjKlvcxP2741xgJhuEvxl32Gt3p_Uf6-iNejfjbcfUfQ8nlHj9Ygn8xO89fUNEo1QbMq0t2w.0UcXM2dMW0QTAMb_RDbGVlqkS7qAd6A66E05p_sC4OA&dib_tag=se&keywords=The+Hunger+Games+book&qid=1711955420&sprefix=the+hunger+games+book%2Caps%2C166&sr=8-1'},
    { id: 3, tags: [26, 19, 11, 5], name: "The Chronicles of Narnia", src: 'https://cdn.vox-cdn.com/thumbor/wknjWA1eDuRCKcOhtiFWMWXTcww=/0x0:1686x816/1200x800/filters:focal(668x248:936x516)/cdn.vox-cdn.com/uploads/chorus_image/image/61633721/narnia.0.jpg', favorite: true, date: '2019-11-02 11:52:31.843 +0000', isRequireLogin: false, link:'https://www.amazon.pl/Chronicles-Narnia-seven-bound-together/dp/0007117302/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=24VG22MKQWURX&dib=eyJ2IjoiMSJ9.pwMqK0c5nt1A2Ptnt7gB6WhegFT1rQRcTHSWzVN1ZxciLbbUTDMLSenKK9LpumawuG_9wWo-qwKC0ngaMpJspXGLWFnZGdqkh5PtgrSrx4nrbNE95MK8yKml1bdWrB-bpXMQlYGq6NYEXjf46IzjxwC8XWanhtv5uIYxGH8_mnCX8pjX_S1GJyA7bipu-4ZuSKobzA8C9UKf6OZUtS-XHGhidXpmC2QcMWWYZsUo7yLgWRLS155TYAogGHNWr1Da666-Ayhtf_kYJSRPBcIYoWKVFbdh0IBt9fRU0VHNgag.5kbOwXEYsII_VtwTY7WUd2s3emRx4yFWSxiJO8p7y9k&dib_tag=se&keywords=The+Chronicles+of+Narnia+book&qid=1711955446&sprefix=the+chronicles+of+narnia+book%2Caps%2C232&sr=8-1'},
    { id: 4, tags: [5, 19, 20, 26], name: "Harry Potter", src: 'https://m.media-amazon.com/images/I/91r0dvXhNGL._AC_UF1000,1000_QL80_FMwebp_.jpg', favorite: false, date: '2023-03-14 11:54:25.843 +0000', isRequireLogin: true, link:'https://www.amazon.pl/Harry-Potter-philosophers-stone-Rowling/dp/1408855658/ref=sr_1_7?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=JX4FTKXM7KDO&dib=eyJ2IjoiMSJ9.jUc9-U4RVJiIqNgreYCl8srIPXOMu8i5vGN6Cqnt9zjbNxA-UgU1iKDXzVMTYcfCs005HTxvI_-eyQbnpIYw51uqaTxyZMByABL9CGnwf5SK5ziQAMnUGfUM_IUt5Zaki2bl2JCo1COpYAvJyQc2DJOAn_-Ta0Xq1G9j9dh81O10GnKupGn13BkSN1BrDGUC8oFUXbbxwLezFP1nffM_kGgISouY21aZHqUWffGlm_y1CC9_LTyQA6WkruonMKKiOdZ8EqLrpPHtJQQecIJ-LgyydtTE1EYsMsv3bRct8dM.ODOLpueq-sPI_FMs3OINjxMPeCfj5h3L-0MyP5y7p54&dib_tag=se&keywords=Harry+Potter+book&qid=1711955473&sprefix=harry+potter+book%2Caps%2C136&sr=8-7'},
    { id: 5, tags: [1, 5], name: "The Hitchhiker's Guide to the Galaxy", src: 'https://m.media-amazon.com/images/I/91lFJOYspuL._AC_UF1000,1000_QL80_FMwebp_.jpg', favorite: false, date: '2021-05-02 03:51:31.843 +0000', isRequireLogin: true, link:'https://www.amazon.pl/Ultimate-Hitchhikers-Guide-Galaxy-Douglas/dp/1529051436/ref=sr_1_2?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=2YUR55FQO3GS3&dib=eyJ2IjoiMSJ9.MuZVW-oSVG41kvjGVeLY3bJt8OBWePPnyPIiVfPbRlOMohaf3K6YgqORPsyHJVqvjGm6shiCwH-NfIq0rGoFwrj-oQBR4T3VREXanGL3FSjEXUmVUE6KF-4leD468hztG4CP6jk16FdQP42LJbkEXUo701-O7r8zhL_CMbnlmprT_8jIi3MOHVyGDYyhKFlqhpLMm91Navyg-aLfwicgYlv1qbVZCF8B7js1KzuF1fS_aSaZxVYeMDUBb9uvW7tI1alKAk91M4tpks3WWzboBkWkM7Ppb9wcarM6w7bzJlU.S8qMlYXrkmgEh3qesBQ89WYdnwjb21uDL_YQCsvVwwA&dib_tag=se&keywords=the+hitchhiker+%27s+guide+to+the+galaxy+book&qid=1711955502&sprefix=the+hitchhiker%27s+guide+to+the+galaxy+book%2Caps%2C149&sr=8-2'},
    { id: 6, tags: [16, 11, 5], name: "Game of Thrones", src: 'https://m.media-amazon.com/images/I/91hPXkwnaeL._AC_UF1000,1000_QL80_FMwebp_.jpg', favorite: false, date: '2019-11-02 11:52:31.843 +0000', isRequireLogin: false, link:'https://www.amazon.pl/Game-Thrones-Continues-Volumes-Complete/dp/0007477155/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=57TAT3JVTJGG&dib=eyJ2IjoiMSJ9.Dyzr3Ryp9SuVyleaHCUV2V3JfWDilQPS7WYUIj1TTZKNo5eSr7rbiag4TmLIRgPp5rIBQObeM60lvy7nIeF_O_SAbJ20JAVHluqURtQkNpI8OTqJDKnIK00uRUoOqTgIxuqt6h0X5eCUKiENRAirNmXn60DcRpklWzJWtBOtLCUJrq48m5XLso_mHdvDKDwXpzFoabRIbnTwSk4FlipT6Ab6rOZFZsHoRsuy6Gx8Q7TO1ofkhRZcOQN0JA-kFx2JM_COEhzz91G38mj9fWC6bT3ul8UL8WTMZDnxfDXpnCU.rXsJH31JPadKoIBNAaYeFQZ2VhZfv_QNcbyQ8mtzx98&dib_tag=se&keywords=Game+of+Thrones+book&qid=1711955543&sprefix=game+of+thrones+book%2Caps%2C176&sr=8-1'},
    { id: 7, tags: [3, 13], name: "Percy Jackson and the Olympians", src: 'https://m.media-amazon.com/images/I/91AXiPhTuoL._AC_UF1000,1000_QL80_FMwebp_.jpg', favorite: true, date: '2023-03-14 11:54:25.843 +0000', isRequireLogin: false, link:'https://www.amazon.pl/Percy-Jackson-Olympians-Book-One/dp/1368098169/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=EQ37K1LPSU27&dib=eyJ2IjoiMSJ9.jwqgr7KssZPhr0kg02QY-SJffBmuuH2c_wsPeDiRzJLqj4e22VDhAh-Mi-GxJuA5JwXRwWIv75TKu2utAJ66ruSDa7my25u1W52yAd1xVR3Npgxc2QPrrwWKbsEx6ZhKxHUiJ3TtIecRHl_YHPDDHDh0HgktBpVRZ0WgD7xsC2lU_-bQMYNy7RA9xEv2-2rwKlNKmo3SMGRqNPaBVo2TF3-eqGZOzfvV4DaAIexefpVoPa4mN_TK2IbAkG1IplCZZdeNNHQhxhg6O0uZeYvCyjeRPc18DasezG22bWRNV2k.UeVKeekvJqYEhV2CSP7eyJdzyyf7iSvZev-h71fAlZ8&dib_tag=se&keywords=Percy+Jackson+and+the+Olympians+book&qid=1711955565&sprefix=percy+jackson+and+the+olympians+book%2Caps%2C201&sr=8-1'},
    { id: 8, tags: [2, 16], name: "The Dark Tower", src: 'https://m.media-amazon.com/images/I/715ViOMJmIL._AC_SX444_SY639_FMwebp_QL65_.jpg', favorite: false, date: '2021-05-02 03:51:31.843 +0000', isRequireLogin: false, link:'https://www.amazon.pl/Dark-Tower-Gunslinger-Stephen-King/dp/1501143514/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=35QQU8YCKP68R&dib=eyJ2IjoiMSJ9.o-V-7G7JwJurZeQjHria8WPIrGFp_WvPfvvf673gjMNyxGVxtNfpuauMcGtf84TC0xxyKXJJ0ilcdWtGCBr064LD8f1IUEfOdBPOdgRpNsVT1lhQ7mRPG8qucFWPYuwsirhl_VeJvDnw__gt4WFQ9VGxo3fRdOv9mga5yWa_RX2KiyFO1oB9FPcigMA6R28sDq_jzC8BUttpKQ7vedFO7u1JU_0e-K7g4hT3vvlMeG0tngBILObAg7IHsYHl_LBn67uRe8U9CHz4jKmu4r7waia089cDIiiWt7QFcaMfroU.mr4i-w38dbgGNq_rbXNAscNiowkxz2sp8-hRL77nfSc&dib_tag=se&keywords=The+Dark+Tower+book&qid=1711955589&sprefix=the+dark+tower+book%2Caps%2C167&sr=8-1'},
    { id: 9, tags: [5, 19], name: "The Wheel of Time", src: 'https://m.media-amazon.com/images/I/51jQChB+fmL._AC_UF1000,1000_QL80_FMwebp_.jpg', favorite: true, date: '2019-11-02 11:52:31.843 +0000', isRequireLogin: true, link:'https://www.amazon.pl/Wheel-Time-Box-Set-Dragon/dp/0356518434/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=1U84DW45JLWLI&dib=eyJ2IjoiMSJ9.83TbPGAs9F3LY3MMOXbGcIHLJADmHESGodHTeu9UdxiJ5ecYHtP4o0irPZB9OiNZxoVrymhMM0ah2M8SMOHls6WKW2Xp5Tfh-3VO8CopTR79BgmV5F1QbmDQm-dfsWoddWkEtwURYkZ7nxIkOkMmy9jYcsDtjXuekcmXNWZJET8GXGRI748UVbiYBNTtDsIIFqNug_9LpP16pYssknvNtwrN3T48uIJp_B0ze1psSDCXti1GgrLdG93QJNAiY0tTcAfVPl3VviszndvrzUwFz0Jns-gpIQ0ACTriNLq5jo4.oF9f8uA7a1MY05bgVaLgXcasKQyBTq5WkWuYdM-ZZQY&dib_tag=se&keywords=The+Wheel+of+Time+book&qid=1711955616&sprefix=the+wheel+of+time+book%2Caps%2C155&sr=8-1'},
    { id: 10, tags: [3, 5, 9, 11], name: "Dune", src: 'https://m.media-amazon.com/images/I/81ym3QUd3KL._AC_UF1000,1000_QL80_FMwebp_.jpg', favorite: true, date: '2023-03-14 11:54:25.843 +0000', isRequireLogin: false, link:'https://www.amazon.pl/Dune-now-major-blockbuster-film/dp/0340960191/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=1DY9841C0NT9H&dib=eyJ2IjoiMSJ9.0hWthGk1HgUipndPWxLuYY8yT4q16Ji9u9v_XlroQ3LfRpuIQJMBHHGV2Oib3pVyFgD_cXCsFlT0Py2qUkNiD13TrUiDuFrM_4Dx9RYQG42K12pkzjuU-g_vL8cnU2rDRbG91vyK8SIxsjs_Sw65XbWVJx5qK1B87aYs0prkXy22J2s7OJfxxpsG1-bYGj71QH_3Ms4LY2MRTtEEkKLCErbnlVxpJWz7R9huCcJz99Nqh-TtnpLAGevh5185ExRdqQW4vH4RrPFQgCZjJgXiDnqgtxcomTqaKf1d6iTJ8Jk.4tFolEegK-Tr8uRE_9sVp5obAfUmctwArWG-PnU5NGI&dib_tag=se&keywords=Dune+book&qid=1711955639&sprefix=dune+book%2Caps%2C166&sr=8-1'},
    { id: 11, tags: [3, 15, 16], name: "The Mortal Instruments", src: 'https://m.media-amazon.com/images/I/91VelHkK8yL._AC_UF1000,1000_QL80_FMwebp_.jpg', favorite: false, date: '2021-05-02 03:51:31.843 +0000', isRequireLogin: false, link:'https://www.amazon.pl/Mortal-Instruments-1-6-Slipcase/dp/1406359823/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=16GC1CY3Q75AP&dib=eyJ2IjoiMSJ9.pZz-gwvtRPBOavNPwAa8O0G4J_p_Arz1QTh9j-BZIOYGQGucAzvUOjjresP7v6v8MtXggDaNw1c7VFHa7tck1D2QYG-_zU3VK1Ajj3X5Zy_M_BeyXPIPJIlb0Hy_4b72CqLtQk7PGdSkbzqIe6QOaTdJdFuSEVT9Q2nBq76Ow1Iv8qgz7XMCI5AD2Shb_nfJ9RoRfbu_9fYqoG5iUxlL07x1x4tUsVZ46Cfn0nRueypqXxr3czpEV_YOz3lvsu9TU4KqbdxxtC6Wy35BEdfMYKQFQ9wlLO1Mw-hzqXJ1mjs.8QEmewEtz6BSqY3p64PRZP6sjKBi6Go35_hR4FmJIPg&dib_tag=se&keywords=The+Mortal+Instruments+book&qid=1711955658&sprefix=the+mortal+instruments+book%2Caps%2C142&sr=8-1'},
    { id: 12, tags: [5, 16, 2], name: "The Maze Runner", src: 'https://m.media-amazon.com/images/I/71IkcEies6L._AC_UF1000,1000_QL80_FMwebp_.jpg', favorite: false, date: '2019-11-02 11:52:31.843 +0000', isRequireLogin: true, link:'https://www.amazon.pl/Maze-Runner-multi-million-bestselling-major/dp/1909489409/ref=sr_1_1?__mk_pl_PL=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=1IBD5EREQF1XV&dib=eyJ2IjoiMSJ9.oPAPe3X-KCEXS5CsghzNiHOYoiSH2ORwhVF8NZBus66gV9apu6RP0l3DGv9gWtYljtPRWqBJMOExK-EqG4y_oBq__ERvXfgW5r1AQFGguv-guLsWNAwkfjUsPLgVKaoS2sKSYLRzwOpY6Po8eV32JJBghqWBAoEfovcND31INz6k_pYC4zWbBJpUOArA9MJx2rRca9vgysSD4N8F2eV_DwdkrM3TpsK6OJpRIc6nZAAGDxGk2vimDzF1UylNsFrS2SlaisBGFViqeFKOOJXMnpkldL81hKAsNPBabbcCtfM.IG-p2rslqE_7akevO5-lc-QgNX_QtI7fArOKDs08xfo&dib_tag=se&keywords=The+Maze+Runner+book&qid=1711955692&sprefix=the+maze+runner+book%2Caps%2C148&sr=8-1'}
  ];

  constructor() {
    this.addPopular(this.moviesCollections);
    this.addPopular(this.bookCollections);
    this.sortTags(this.tags);
   }

  addPopular(shelvesOrBooks: Book[]) :void {
    let tagsArray: any[] = [];
    shelvesOrBooks.forEach((shelf) => tagsArray.push(...shelf.tags));
    
    tagsArray.forEach((tagInArray) => {
      let neededTag = this.tags.find((tag) => tag.id === tagInArray);
      if (neededTag) neededTag.timesUsed++;
    })
  }

  sortTags(tags : Tag[]): void {
    tags.sort((a, b) => {
      return (a.timesUsed === b.timesUsed) ? a.name.localeCompare(b.name) : b.timesUsed - a.timesUsed;
    })
  }

  shelvesObs$ = from(this.moviesCollections)
  .pipe(
    toArray()
  );

  booksObs$ = from(this.bookCollections)
  .pipe(
    toArray()
  );
}
